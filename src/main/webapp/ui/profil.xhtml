<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:sec="http://www.springframework.org/security/tags" xmlns:c="http://java.sun.com/jsp/jstl/core"
                template="/WEB-INF/template.xhtml">

    <ui:define name="title">
        #{msg['profile.title']}
    </ui:define>

    <ui:define name="implementation">
        <c:choose>
            <c:when test="#{param['edit'] != null}">
                    <h:form>
                        <p:growl id="growl1" />
                        <p:panel id="pnl1" header="#{msg['profile.form.title']}" style="margin-bottom:10px;">
                            <p:messages id="messages1" />
                            <h:panelGrid columns="6" cellpadding="5">
                                <h:outputLabel for="lastname1" value="#{msg['formation.form.lastName']}:" />
                                <p:inputText id="lastname1" value="#{clientManagementBean.lastName}" required="true" label="Lastname1"/>
                                <p:message for="lastname1" />

                                <h:outputLabel for="firstname1" value="#{msg['formation.form.firstName']}:" />
                                <p:inputText id="firstname1" value="#{clientManagementBean.firstName}" required="true" label="Firstname1">
                                    <f:validateLength minimum="2" />
                                </p:inputText>
                                <p:message for="firstname1" />

                                <h:outputLabel for="address1" value="#{msg['formation.form.address']}:" />
                                <p:inputTextarea id="address1" rows="3" cols="22" value="#{clientManagementBean.address}" required="true" label="Address1"/>
                                <p:message for="address1" />

                                <h:outputLabel for="phone1" value="#{msg['formation.form.phone']}:" />
                                <p:inputMask id="phone1" value="#{clientManagementBean.phone}" mask="99-99-99-99-99"/>
                                <p:message for="phone1" />

                                <h:outputLabel for="email1" value="#{msg['formation.form.email']}:" />
                                <p:inputText id="email1" value="#{clientManagementBean.email}" required="true" label="Email1"/>
                                <p:message for="email1" />
                            </h:panelGrid>
                            <p:commandButton id="saveBtn1" value="#{msg['profile.save']}"  style="margin:0" action="#{clientManagementBean.edit}" update="growl1"/>
                        </p:panel>

                    </h:form>
            </c:when>
            <c:otherwise>
                    <h:form>
                        <p:panel id="pnl" header="#{msg['profile.form.title']}" style="margin-bottom:10px;">
                            <p:messages id="messages" />
                            <h:panelGrid columns="6" cellpadding="5">
                                <h:outputLabel for="lastname" value="#{msg['formation.form.lastName']}:" />
                                <p:inputText id="lastname" value="#{clientManagementBean.lastName}" required="true" disabled="true" label="Lastname"/>
                                <p:message for="lastname" />

                                <h:outputLabel for="firstname" value="#{msg['formation.form.firstName']}:" />
                                <p:inputText id="firstname" value="#{clientManagementBean.firstName}" required="true" disabled="true" label="Firstname">
                                    <f:validateLength minimum="2" />
                                </p:inputText>
                                <p:message for="firstname" />

                                <h:outputLabel for="address" value="#{msg['formation.form.address']}:" />
                                <p:inputTextarea id="address" rows="3" cols="22" value="#{clientManagementBean.address}" required="true" disabled="true" label="Address"/>
                                <p:message for="address" />

                                <h:outputLabel for="phone" value="#{msg['formation.form.phone']}:" />
                                <p:inputMask id="phone" value="#{clientManagementBean.phone}" disabled="true" mask="99-99-99-99-99"/>
                                <p:message for="phone" />

                                <h:outputLabel for="email" value="#{msg['formation.form.email']}:" />
                                <p:inputText id="email" value="#{clientManagementBean.email}" required="true" disabled="true" label="Email"/>
                                <p:message for="email" />
                            </h:panelGrid>
                            <p:button id="editBtn" value="#{msg['profile.edit']}"  style="margin:0" href="#{request.contextPath}/ui/profil.xhtml?edit=true"/>
                        </p:panel>

                    </h:form>
            </c:otherwise>
        </c:choose>
        <p:panel id="pnl2" header="#{msg['profile.courses']}" style="margin-bottom:10px;">
            <h:panelGrid columns="6" cellpadding="5">
                <c:forEach var="courseSession" items="#{clientManagementBean.client.courseSessions}">
                    <h:outputText value="#{courseSession.course.code}" style="font-weight: bold" />
                    <h:outputText value="#{courseSession.location.city}" />
                    <h:outputText value="#{courseSession.startDate}" >
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputText>
                     -
                    <h:outputText value="#{courseSession.endDate}" >
                        <f:convertDateTime pattern="dd/MM/yyyy" />
                    </h:outputText>
                </c:forEach>
            </h:panelGrid>
        </p:panel>
    </ui:define>

</ui:composition>